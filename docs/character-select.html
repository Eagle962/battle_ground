<!DOCTYPE html>
<html>
<head>
    <title>Character Selection - Enhanced Combat Arena</title>
    <link rel="stylesheet" href="./styles/game.css">
    <link rel="stylesheet" href="./styles/character-select.css">
    <style>
        .mode-selection {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .mode-button {
            margin: 0 10px;
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .mode-button.active {
            background: #e74c3c;
            border-color: #c0392b;
        }
    </style>
</head>
<body>
    <div class="character-select">
        <h1>Choose Your Fighter</h1>
        
        <div class="mode-selection">
            <button class="mode-button active" id="pvpMode">PvP</button>
            <button class="mode-button" id="computerMode">vs Computer</button>
        </div>

        <div class="player-turn">Player 1's Turn</div>
        
        <div class="character-grid">
            <div class="character-card" data-character="warrior">
                <div class="character-preview" style="background: linear-gradient(135deg, #e74c3c, #c0392b)"></div>
                <div class="character-info">
                    <div class="character-name">Warrior</div>
                    <div class="character-stats">
                        Health: ★★★<br>
                        Speed: ★★☆<br>
                        Power: ★★★
                    </div>
                </div>
            </div>

            <div class="character-card" data-character="ninja">
                <div class="character-preview" style="background: linear-gradient(135deg, #3498db, #2980b9)"></div>
                <div class="character-info">
                    <div class="character-name">Ninja</div>
                    <div class="character-stats">
                        Health: ★★☆<br>
                        Speed: ★★★<br>
                        Power: ★★☆
                    </div>
                </div>
            </div>

            <div class="character-card" data-character="mage">
                <div class="character-preview" style="background: linear-gradient(135deg, #9b59b6, #8e44ad)"></div>
                <div class="character-info">
                    <div class="character-name">Mage</div>
                    <div class="character-stats">
                        Health: ★☆☆<br>
                        Speed: ★★☆<br>
                        Power: ★★★
                    </div>
                </div>
            </div>
        </div>

        <div class="selection-info">
            <div class="player1-selection">Player 1: Not Selected</div>
            <div class="player2-selection">Player 2: Not Selected</div>
        </div>

        <button class="start-button" id="startButton" disabled>START BATTLE!</button>
    </div>

    <script>
        let player1Selection = null;
        let player2Selection = null;
        let isComputerMode = false;
        const playerTurn = document.querySelector('.player-turn');
        const startButton = document.getElementById('startButton');
        const p1SelectionText = document.querySelector('.player1-selection');
        const p2SelectionText = document.querySelector('.player2-selection');
        const pvpModeButton = document.getElementById('pvpMode');
        const computerModeButton = document.getElementById('computerMode');
        const characterCards = document.querySelectorAll('.character-card');

        // Mode selection
        pvpModeButton.addEventListener('click', () => {
            isComputerMode = false;
            pvpModeButton.classList.add('active');
            computerModeButton.classList.remove('active');
            resetSelection();
        });

        computerModeButton.addEventListener('click', () => {
            isComputerMode = true;
            computerModeButton.classList.add('active');
            pvpModeButton.classList.remove('active');
            resetSelection();
        });

        function resetSelection() {
            player1Selection = null;
            player2Selection = null;
            startButton.disabled = true;
            playerTurn.textContent = "Player 1's Turn";
            p1SelectionText.textContent = "Player 1: Not Selected";
            p2SelectionText.textContent = "Player 2: Not Selected";
            
            characterCards.forEach(card => {
                card.classList.remove('selected');
            });
        }

        characterCards.forEach(card => {
            card.addEventListener('click', () => {
                if (!player1Selection) {
                    player1Selection = card.dataset.character;
                    card.classList.add('selected');
                    p1SelectionText.textContent = `Player 1: ${card.querySelector('.character-name').textContent}`;
                    
                    if (isComputerMode) {
                        // Automatically select a different character for computer
                        const availableCharacters = Array.from(characterCards)
                            .filter(c => c.dataset.character !== player1Selection);
                        const computerCard = availableCharacters[Math.floor(Math.random() * availableCharacters.length)];
                        
                        player2Selection = computerCard.dataset.character;
                        computerCard.classList.add('selected');
                        p2SelectionText.textContent = `Player 2: ${computerCard.querySelector('.character-name').textContent}`;
                        playerTurn.textContent = "Ready to Battle!";
                        startButton.disabled = false;
                    } else {
                        playerTurn.textContent = "Player 2's Turn";
                    }
                } else if (!isComputerMode && !player2Selection && card.dataset.character !== player1Selection) {
                    player2Selection = card.dataset.character;
                    card.classList.add('selected');
                    playerTurn.textContent = "Ready to Battle!";
                    p2SelectionText.textContent = `Player 2: ${card.querySelector('.character-name').textContent}`;
                    startButton.disabled = false;
                }
            });
        });

        startButton.addEventListener('click', () => {
            // Store selections for the game page
            localStorage.setItem('player1Character', player1Selection);
            localStorage.setItem('player2Character', player2Selection);
            window.location.href = 'game.html';
        });
    </script>
</body>
</html>